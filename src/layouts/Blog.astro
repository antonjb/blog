---
import { Image } from 'astro:assets'
import Layout from './Layout.astro'

import type { CollectionEntry } from 'astro:content'

interface Props {
    frontmatter: CollectionEntry<'posts'>['data']
}

const { frontmatter } = Astro.props
---

<Layout title={frontmatter.title} description={frontmatter.description} publishedDate={frontmatter.date} tags={frontmatter.tags}>
    {
        frontmatter.heroImage ? (
            <Image src={frontmatter.heroImage} alt="" loading="eager" densities={[1, 2]} class="hero-image" />
        ) : null
    }
    <h1>{frontmatter.title}</h1>
    <p>
        <time datetime={frontmatter.date.toISOString()}>{frontmatter.date.toLocaleString()}</time>
    </p>
    {
        frontmatter.tags ? (
            <ul>
                {frontmatter.tags.map((tag) => (
                    <li>{tag}</li>
                ))}
            </ul>
        ) : undefined
    }
    <slot />
</Layout>

<style>
    .hero-image {
        grid-column: overflow;
        inline-size: 100%;
        block-size: auto;
        object-fit: cover;
        object-position: center;
    }
</style>